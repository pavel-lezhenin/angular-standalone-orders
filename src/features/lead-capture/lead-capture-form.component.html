<mat-card class="lead-form-card">
  <mat-card-header>
    <mat-card-title>
      <mat-icon>contact_mail</mat-icon>
      Request a Demo
    </mat-card-title>
    <mat-card-subtitle>
      Choose your preferred way to connect with us
    </mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <form [formGroup]="leadForm" (ngSubmit)="onSubmit()">
      <!-- Name -->
      <mat-form-field appearance="outline">
        <mat-label>Full Name</mat-label>
        <input matInput formControlName="name" required>
        <mat-icon matPrefix>person</mat-icon>
        @if (leadForm.get('name')?.invalid && leadForm.get('name')?.touched) {
          <mat-error>Name is required</mat-error>
        }
      </mat-form-field>

      <!-- Email -->
      <mat-form-field appearance="outline">
        <mat-label>Work Email</mat-label>
        <input matInput type="email" formControlName="email" required>
        <mat-icon matPrefix>email</mat-icon>
        @if (leadForm.get('email')?.invalid && leadForm.get('email')?.touched) {
          <mat-error>Valid email is required</mat-error>
        }
      </mat-form-field>

      <!-- Company -->
      <mat-form-field appearance="outline">
        <mat-label>Company Name</mat-label>
        <input matInput formControlName="company">
        <mat-icon matPrefix>business</mat-icon>
      </mat-form-field>

      <!-- Contact Channel Selection -->
      <div class="channel-selection">
        <label class="section-label">Preferred Contact Method</label>
        <mat-radio-group formControlName="channel">
          <mat-radio-button value="email">Email</mat-radio-button>
          <mat-radio-button value="telegram">Telegram</mat-radio-button>
          <mat-radio-button value="whatsapp">WhatsApp</mat-radio-button>
          <mat-radio-button value="phone">Phone Call</mat-radio-button>
        </mat-radio-group>
      </div>

      <!-- Conditional Channel Value -->
      @if (selectedChannel === 'telegram') {
        <mat-form-field appearance="outline">
          <mat-label>Telegram Username</mat-label>
          <input matInput formControlName="channelValue" placeholder="@username" required>
          <mat-icon matPrefix>send</mat-icon>
          @if (leadForm.get('channelValue')?.invalid && leadForm.get('channelValue')?.touched) {
            <mat-error>Telegram username is required</mat-error>
          }
        </mat-form-field>
      }

      @if (selectedChannel === 'whatsapp' || selectedChannel === 'phone') {
        <mat-form-field appearance="outline">
          <mat-label>Phone Number</mat-label>
          <input matInput formControlName="channelValue" placeholder="+1234567890" required>
          <mat-icon matPrefix>phone</mat-icon>
          @if (leadForm.get('channelValue')?.invalid && leadForm.get('channelValue')?.touched) {
            <mat-error>Phone number is required</mat-error>
          }
        </mat-form-field>
      }

      <!-- Message -->
      <mat-form-field appearance="outline">
        <mat-label>Message (Optional)</mat-label>
        <textarea matInput formControlName="message" rows="3" 
          placeholder="Tell us about your needs..."></textarea>
      </mat-form-field>

      <!-- Privacy Consent -->
      <div class="consent-section">
        <mat-checkbox formControlName="consent" required>
          I agree to the <a href="#privacy" target="_blank">Privacy Policy</a> 
          and consent to being contacted
        </mat-checkbox>
        @if (leadForm.get('consent')?.invalid && leadForm.get('consent')?.touched) {
          <mat-error class="consent-error">You must agree to continue</mat-error>
        }
      </div>

      <!-- Submit Button -->
      <button 
        mat-raised-button 
        color="primary" 
        type="submit"
        [disabled]="leadForm.invalid"
        class="submit-button">
        <mat-icon>send</mat-icon>
        Request Demo
      </button>
    </form>
  </mat-card-content>
</mat-card>
