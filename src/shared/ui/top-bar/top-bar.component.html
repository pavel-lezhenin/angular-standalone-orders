<mat-toolbar class="top-bar">
  <div class="top-bar-content flex items-center justify-between">
    <!-- Left: Logo + Title + Navigation -->
    <div class="left-section gap-2xl flex items-center">
      @if (showSidenavToggle) {
        <button
          mat-icon-button
          type="button"
          class="sidenav-toggle-button"
          (click)="handleSidenavToggle()"
          [attr.aria-label]="sidenavOpened ? 'Close navigation menu' : 'Open navigation menu'"
        >
          <mat-icon>{{ sidenavOpened ? 'menu_open' : 'menu' }}</mat-icon>
        </button>
      }

      <a routerLink="/" class="logo-section gap-xxs flex items-center">
        <mat-icon class="logo-icon">shopping_bag</mat-icon>
        <span class="title">{{ title }}</span>
      </a>

      <!-- Desktop navigation -->
      <nav class="desktop-nav gap-xxs flex items-center">
        @for (item of navItems; track item.label) {
          <button mat-button [class.nav-active]="isActive(item)" (click)="handleNavClick(item)">
            @if (item.icon) {
              <mat-icon>{{ item.icon }}</mat-icon>
            }
            {{ item.label }}
          </button>
        }
      </nav>

      <!-- Mobile hamburger menu -->
      @if (navItems.length > 0) {
        <button mat-icon-button [matMenuTriggerFor]="mobileMenu" class="mobile-menu-button">
          <mat-icon>menu</mat-icon>
        </button>
      }
    </div>

    <!-- Right: User Menu -->
    <div class="right-section flex items-center">
      <app-user-menu />
    </div>
  </div>
</mat-toolbar>

<!-- Mobile navigation menu -->
<mat-menu #mobileMenu="matMenu">
  @for (item of navItems; track item.label) {
    <button mat-menu-item [class.nav-active]="isActive(item)" (click)="handleNavClick(item)">
      @if (item.icon) {
        <mat-icon>{{ item.icon }}</mat-icon>
      }
      <span>{{ item.label }}</span>
    </button>
  }
</mat-menu>
